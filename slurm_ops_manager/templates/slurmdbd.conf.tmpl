# slurm.conf file generated by Juju.
DbdHost={{ slurmdbd_hostname }}
DbdAddr={{ slurmdbd_hostname }}

DbdPort={{ slurmdbd_port }}

AuthType=auth/munge
AuthInfo=socket=/var/snap/munge/current/munge.socket.2

SlurmUser=slurm

PluginDir=/usr/local/lib/slurm

PidFile=/srv/slurm/slurmdbd.pid

LogFile=/var/log/slurm/slurmdbd.log

StorageType=accounting_storage/mysql
StorageHost={{ db_hostname }}
StoragePort={{ db_port }}
StoragePass={{ db_password }}
StorageUser={{ db_username }}
StorageLoc={{ db_name }}

DebugLevel={{ slurmdbd_debug }} 

ArchiveEvents="yes"
ArchiveJobs="yes"
ArchiveResvs="yes"
ArchiveSteps="no"
ArchiveSuspend="no"
ArchiveTXN="no"
ArchiveUsage="no"

#ArchiveScript=/usr/sbin/slurm.dbd.archive

PurgeEventAfter="1month"
PurgeJobAfter="12month"
PurgeResvAfter="1month"
PurgeStepAfter="1month"
PurgeSuspendAfter="1month"
PurgeTXNAfter="12month"
PurgeUsageAfter="24month"
